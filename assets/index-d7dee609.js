import{V as $t}from"./index-f8ba620c.js";import{b as zt,i as Jt}from"./index-3aa13386.js";var Lt={},Ft,St;function Zt(){if(St)return Ft;St=1,Ft=u;function u(o){if(o)return n(o)}function n(o){for(var m in u.prototype)o[m]=u.prototype[m];return o}return u.prototype.on=u.prototype.addEventListener=function(o,m){return this._callbacks=this._callbacks||{},(this._callbacks[o]=this._callbacks[o]||[]).push(m),this},u.prototype.once=function(o,m){var g=this;this._callbacks=this._callbacks||{};function w(){g.off(o,w),m.apply(this,arguments)}return w.fn=m,this.on(o,w),this},u.prototype.off=u.prototype.removeListener=u.prototype.removeAllListeners=u.prototype.removeEventListener=function(o,m){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var g=this._callbacks[o];if(!g)return this;if(arguments.length==1)return delete this._callbacks[o],this;for(var w,d=0;d<g.length;d++)if(w=g[d],w===m||w.fn===m){g.splice(d,1);break}return this},u.prototype.emit=function(o){this._callbacks=this._callbacks||{};var m=[].slice.call(arguments,1),g=this._callbacks[o];if(g){g=g.slice(0);for(var w=0,d=g.length;w<d;++w)g[w].apply(this,m)}return this},u.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks[o]||[]},u.prototype.hasListeners=function(o){return!!this.listeners(o).length},Ft}var At,Bt;function te(){if(Bt)return At;Bt=1;var u=Zt();function n(){u.call(this)}return n.prototype=new u,At=n,n.Stream=n,n.prototype.pipe=function(o,m){var g=this;function w(z){o.writable&&o.write(z)===!1&&g.pause&&g.pause()}g.on("data",w);function d(){g.readable&&g.resume&&g.resume()}o.on("drain",d),!o._isStdio&&(!m||m.end!==!1)&&(g.on("end",P),g.on("close",W));var c=!1;function P(){c||(c=!0,o.end())}function W(){c||(c=!0,typeof o.destroy=="function"&&o.destroy())}function M(z){if(Y(),!this.hasListeners("error"))throw z}g.on("error",M),o.on("error",M);function Y(){g.off("data",w),o.off("drain",d),g.off("end",P),g.off("close",W),g.off("error",M),o.off("error",M),g.off("end",Y),g.off("close",Y),o.off("end",Y),o.off("close",Y)}return g.on("end",Y),g.on("close",Y),o.on("end",Y),o.on("close",Y),o.emit("pipe",g),o},At}var Nt={},gt={exports:{}},It={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ut;function ee(){return Ut||(Ut=1,function(u){var n=zt,o=Jt,m=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;u.Buffer=c,u.SlowBuffer=F,u.INSPECT_MAX_BYTES=50;var g=2147483647;u.kMaxLength=g,c.TYPED_ARRAY_SUPPORT=w(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var i=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(i,t),i.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function d(i){if(i>g)throw new RangeError('The value "'+i+'" is invalid for option "size"');var t=new Uint8Array(i);return Object.setPrototypeOf(t,c.prototype),t}function c(i,t,e){if(typeof i=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Y(i)}return P(i,t,e)}c.poolSize=8192;function P(i,t,e){if(typeof i=="string")return z(i,t);if(ArrayBuffer.isView(i))return tt(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(B(i,ArrayBuffer)||i&&B(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(B(i,SharedArrayBuffer)||i&&B(i.buffer,SharedArrayBuffer)))return et(i,t,e);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var s=i.valueOf&&i.valueOf();if(s!=null&&s!==i)return c.from(s,t,e);var l=Z(i);if(l)return l;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return c.from(i[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}c.from=function(i,t,e){return P(i,t,e)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function W(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function M(i,t,e){return W(i),i<=0?d(i):t!==void 0?typeof e=="string"?d(i).fill(t,e):d(i).fill(t):d(i)}c.alloc=function(i,t,e){return M(i,t,e)};function Y(i){return W(i),d(i<0?0:p(i)|0)}c.allocUnsafe=function(i){return Y(i)},c.allocUnsafeSlow=function(i){return Y(i)};function z(i,t){if((typeof t!="string"||t==="")&&(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var e=v(i,t)|0,s=d(e),l=s.write(i,t);return l!==e&&(s=s.slice(0,l)),s}function J(i){for(var t=i.length<0?0:p(i.length)|0,e=d(t),s=0;s<t;s+=1)e[s]=i[s]&255;return e}function tt(i){if(B(i,Uint8Array)){var t=new Uint8Array(i);return et(t.buffer,t.byteOffset,t.byteLength)}return J(i)}function et(i,t,e){if(t<0||i.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');var s;return t===void 0&&e===void 0?s=new Uint8Array(i):e===void 0?s=new Uint8Array(i,t):s=new Uint8Array(i,t,e),Object.setPrototypeOf(s,c.prototype),s}function Z(i){if(c.isBuffer(i)){var t=p(i.length)|0,e=d(t);return e.length===0||i.copy(e,0,0,t),e}if(i.length!==void 0)return typeof i.length!="number"||G(i.length)?d(0):J(i);if(i.type==="Buffer"&&Array.isArray(i.data))return J(i.data)}function p(i){if(i>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return i|0}function F(i){return+i!=i&&(i=0),c.alloc(+i)}c.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==c.prototype},c.compare=function(t,e){if(B(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),B(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var s=t.length,l=e.length,T=0,x=Math.min(s,l);T<x;++T)if(t[T]!==e[T]){s=t[T],l=e[T];break}return s<l?-1:l<s?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return c.alloc(0);var s;if(e===void 0)for(e=0,s=0;s<t.length;++s)e+=t[s].length;var l=c.allocUnsafe(e),T=0;for(s=0;s<t.length;++s){var x=t[s];if(B(x,Uint8Array))T+x.length>l.length?c.from(x).copy(l,T):Uint8Array.prototype.set.call(l,x,T);else if(c.isBuffer(x))x.copy(l,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=x.length}return l};function v(i,t){if(c.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||B(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);var e=i.length,s=arguments.length>2&&arguments[2]===!0;if(!s&&e===0)return 0;for(var l=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return r(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return C(i).length;default:if(l)return s?-1:r(i).length;t=(""+t).toLowerCase(),l=!0}}c.byteLength=v;function D(i,t,e){var s=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(i||(i="utf8");;)switch(i){case"hex":return st(this,t,e);case"utf8":case"utf-8":return ut(this,t,e);case"ascii":return S(this,t,e);case"latin1":case"binary":return dt(this,t,e);case"base64":return nt(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,t,e);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),s=!0}}c.prototype._isBuffer=!0;function b(i,t,e){var s=i[t];i[t]=i[e],i[e]=s}c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},c.prototype.toString=function(){var t=this.length;return t===0?"":arguments.length===0?ut(this,0,t):D.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:c.compare(this,t)===0},c.prototype.inspect=function(){var t="",e=u.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},m&&(c.prototype[m]=c.prototype.inspect),c.prototype.compare=function(t,e,s,l,T){if(B(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),s===void 0&&(s=t?t.length:0),l===void 0&&(l=0),T===void 0&&(T=this.length),e<0||s>t.length||l<0||T>this.length)throw new RangeError("out of range index");if(l>=T&&e>=s)return 0;if(l>=T)return-1;if(e>=s)return 1;if(e>>>=0,s>>>=0,l>>>=0,T>>>=0,this===t)return 0;for(var x=T-l,_=s-e,U=Math.min(x,_),R=this.slice(l,T),j=t.slice(e,s),k=0;k<U;++k)if(R[k]!==j[k]){x=R[k],_=j[k];break}return x<_?-1:_<x?1:0};function ht(i,t,e,s,l){if(i.length===0)return-1;if(typeof e=="string"?(s=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,G(e)&&(e=l?0:i.length-1),e<0&&(e=i.length+e),e>=i.length){if(l)return-1;e=i.length-1}else if(e<0)if(l)e=0;else return-1;if(typeof t=="string"&&(t=c.from(t,s)),c.isBuffer(t))return t.length===0?-1:H(i,t,e,s,l);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?l?Uint8Array.prototype.indexOf.call(i,t,e):Uint8Array.prototype.lastIndexOf.call(i,t,e):H(i,[t],e,s,l);throw new TypeError("val must be string, number or Buffer")}function H(i,t,e,s,l){var T=1,x=i.length,_=t.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(i.length<2||t.length<2)return-1;T=2,x/=2,_/=2,e/=2}function U(bt,Dt){return T===1?bt[Dt]:bt.readUInt16BE(Dt*T)}var R;if(l){var j=-1;for(R=e;R<x;R++)if(U(i,R)===U(t,j===-1?0:R-j)){if(j===-1&&(j=R),R-j+1===_)return j*T}else j!==-1&&(R-=R-j),j=-1}else for(e+_>x&&(e=x-_),R=e;R>=0;R--){for(var k=!0,pt=0;pt<_;pt++)if(U(i,R+pt)!==U(t,pt)){k=!1;break}if(k)return R}return-1}c.prototype.includes=function(t,e,s){return this.indexOf(t,e,s)!==-1},c.prototype.indexOf=function(t,e,s){return ht(this,t,e,s,!0)},c.prototype.lastIndexOf=function(t,e,s){return ht(this,t,e,s,!1)};function xt(i,t,e,s){e=Number(e)||0;var l=i.length-e;s?(s=Number(s),s>l&&(s=l)):s=l;var T=t.length;s>T/2&&(s=T/2);for(var x=0;x<s;++x){var _=parseInt(t.substr(x*2,2),16);if(G(_))return x;i[e+x]=_}return x}function h(i,t,e,s){return K(r(t,i.length-e),i,e,s)}function Et(i,t,e,s){return K(y(t),i,e,s)}function rt(i,t,e,s){return K(C(t),i,e,s)}function L(i,t,e,s){return K(f(t,i.length-e),i,e,s)}c.prototype.write=function(t,e,s,l){if(e===void 0)l="utf8",s=this.length,e=0;else if(s===void 0&&typeof e=="string")l=e,s=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(s)?(s=s>>>0,l===void 0&&(l="utf8")):(l=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var T=this.length-e;if((s===void 0||s>T)&&(s=T),t.length>0&&(s<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");l||(l="utf8");for(var x=!1;;)switch(l){case"hex":return xt(this,t,e,s);case"utf8":case"utf-8":return h(this,t,e,s);case"ascii":case"latin1":case"binary":return Et(this,t,e,s);case"base64":return rt(this,t,e,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,e,s);default:if(x)throw new TypeError("Unknown encoding: "+l);l=(""+l).toLowerCase(),x=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function nt(i,t,e){return t===0&&e===i.length?n.fromByteArray(i):n.fromByteArray(i.slice(t,e))}function ut(i,t,e){e=Math.min(i.length,e);for(var s=[],l=t;l<e;){var T=i[l],x=null,_=T>239?4:T>223?3:T>191?2:1;if(l+_<=e){var U,R,j,k;switch(_){case 1:T<128&&(x=T);break;case 2:U=i[l+1],(U&192)===128&&(k=(T&31)<<6|U&63,k>127&&(x=k));break;case 3:U=i[l+1],R=i[l+2],(U&192)===128&&(R&192)===128&&(k=(T&15)<<12|(U&63)<<6|R&63,k>2047&&(k<55296||k>57343)&&(x=k));break;case 4:U=i[l+1],R=i[l+2],j=i[l+3],(U&192)===128&&(R&192)===128&&(j&192)===128&&(k=(T&15)<<18|(U&63)<<12|(R&63)<<6|j&63,k>65535&&k<1114112&&(x=k))}}x===null?(x=65533,_=1):x>65535&&(x-=65536,s.push(x>>>10&1023|55296),x=56320|x&1023),s.push(x),l+=_}return mt(s)}var it=4096;function mt(i){var t=i.length;if(t<=it)return String.fromCharCode.apply(String,i);for(var e="",s=0;s<t;)e+=String.fromCharCode.apply(String,i.slice(s,s+=it));return e}function S(i,t,e){var s="";e=Math.min(i.length,e);for(var l=t;l<e;++l)s+=String.fromCharCode(i[l]&127);return s}function dt(i,t,e){var s="";e=Math.min(i.length,e);for(var l=t;l<e;++l)s+=String.fromCharCode(i[l]);return s}function st(i,t,e){var s=i.length;(!t||t<0)&&(t=0),(!e||e<0||e>s)&&(e=s);for(var l="",T=t;T<e;++T)l+=Q[i[T]];return l}function ot(i,t,e){for(var s=i.slice(t,e),l="",T=0;T<s.length-1;T+=2)l+=String.fromCharCode(s[T]+s[T+1]*256);return l}c.prototype.slice=function(t,e){var s=this.length;t=~~t,e=e===void 0?s:~~e,t<0?(t+=s,t<0&&(t=0)):t>s&&(t=s),e<0?(e+=s,e<0&&(e=0)):e>s&&(e=s),e<t&&(e=t);var l=this.subarray(t,e);return Object.setPrototypeOf(l,c.prototype),l};function O(i,t,e){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+t>e)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,s){t=t>>>0,e=e>>>0,s||O(t,e,this.length);for(var l=this[t],T=1,x=0;++x<e&&(T*=256);)l+=this[t+x]*T;return l},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,s){t=t>>>0,e=e>>>0,s||O(t,e,this.length);for(var l=this[t+--e],T=1;e>0&&(T*=256);)l+=this[t+--e]*T;return l},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t=t>>>0,e||O(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||O(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||O(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||O(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,s){t=t>>>0,e=e>>>0,s||O(t,e,this.length);for(var l=this[t],T=1,x=0;++x<e&&(T*=256);)l+=this[t+x]*T;return T*=128,l>=T&&(l-=Math.pow(2,8*e)),l},c.prototype.readIntBE=function(t,e,s){t=t>>>0,e=e>>>0,s||O(t,e,this.length);for(var l=e,T=1,x=this[t+--l];l>0&&(T*=256);)x+=this[t+--l]*T;return T*=128,x>=T&&(x-=Math.pow(2,8*e)),x},c.prototype.readInt8=function(t,e){return t=t>>>0,e||O(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},c.prototype.readInt16LE=function(t,e){t=t>>>0,e||O(t,2,this.length);var s=this[t]|this[t+1]<<8;return s&32768?s|4294901760:s},c.prototype.readInt16BE=function(t,e){t=t>>>0,e||O(t,2,this.length);var s=this[t+1]|this[t]<<8;return s&32768?s|4294901760:s},c.prototype.readInt32LE=function(t,e){return t=t>>>0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t=t>>>0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return t=t>>>0,e||O(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t=t>>>0,e||O(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||O(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||O(t,8,this.length),o.read(this,t,!1,52,8)};function V(i,t,e,s,l,T){if(!c.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>l||t<T)throw new RangeError('"value" argument is out of bounds');if(e+s>i.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,s,l){if(t=+t,e=e>>>0,s=s>>>0,!l){var T=Math.pow(2,8*s)-1;V(this,t,e,s,T,0)}var x=1,_=0;for(this[e]=t&255;++_<s&&(x*=256);)this[e+_]=t/x&255;return e+s},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,s,l){if(t=+t,e=e>>>0,s=s>>>0,!l){var T=Math.pow(2,8*s)-1;V(this,t,e,s,T,0)}var x=s-1,_=1;for(this[e+x]=t&255;--x>=0&&(_*=256);)this[e+x]=t/_&255;return e+s},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,1,255,0),this[e]=t&255,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4},c.prototype.writeIntLE=function(t,e,s,l){if(t=+t,e=e>>>0,!l){var T=Math.pow(2,8*s-1);V(this,t,e,s,T-1,-T)}var x=0,_=1,U=0;for(this[e]=t&255;++x<s&&(_*=256);)t<0&&U===0&&this[e+x-1]!==0&&(U=1),this[e+x]=(t/_>>0)-U&255;return e+s},c.prototype.writeIntBE=function(t,e,s,l){if(t=+t,e=e>>>0,!l){var T=Math.pow(2,8*s-1);V(this,t,e,s,T-1,-T)}var x=s-1,_=1,U=0;for(this[e+x]=t&255;--x>=0&&(_*=256);)t<0&&U===0&&this[e+x+1]!==0&&(U=1),this[e+x]=(t/_>>0)-U&255;return e+s},c.prototype.writeInt8=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1},c.prototype.writeInt16LE=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2},c.prototype.writeInt32LE=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,s){return t=+t,e=e>>>0,s||V(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function yt(i,t,e,s,l,T){if(e+s>i.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function ct(i,t,e,s,l){return t=+t,e=e>>>0,l||yt(i,t,e,4),o.write(i,t,e,s,23,4),e+4}c.prototype.writeFloatLE=function(t,e,s){return ct(this,t,e,!0,s)},c.prototype.writeFloatBE=function(t,e,s){return ct(this,t,e,!1,s)};function ft(i,t,e,s,l){return t=+t,e=e>>>0,l||yt(i,t,e,8),o.write(i,t,e,s,52,8),e+8}c.prototype.writeDoubleLE=function(t,e,s){return ft(this,t,e,!0,s)},c.prototype.writeDoubleBE=function(t,e,s){return ft(this,t,e,!1,s)},c.prototype.copy=function(t,e,s,l){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(s||(s=0),!l&&l!==0&&(l=this.length),e>=t.length&&(e=t.length),e||(e=0),l>0&&l<s&&(l=s),l===s||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("sourceEnd out of bounds");l>this.length&&(l=this.length),t.length-e<l-s&&(l=t.length-e+s);var T=l-s;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,s,l):Uint8Array.prototype.set.call(t,this.subarray(s,l),e),T},c.prototype.fill=function(t,e,s,l){if(typeof t=="string"){if(typeof e=="string"?(l=e,e=0,s=this.length):typeof s=="string"&&(l=s,s=this.length),l!==void 0&&typeof l!="string")throw new TypeError("encoding must be a string");if(typeof l=="string"&&!c.isEncoding(l))throw new TypeError("Unknown encoding: "+l);if(t.length===1){var T=t.charCodeAt(0);(l==="utf8"&&T<128||l==="latin1")&&(t=T)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<s)throw new RangeError("Out of range index");if(s<=e)return this;e=e>>>0,s=s===void 0?this.length:s>>>0,t||(t=0);var x;if(typeof t=="number")for(x=e;x<s;++x)this[x]=t;else{var _=c.isBuffer(t)?t:c.from(t,l),U=_.length;if(U===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(x=0;x<s-e;++x)this[x+e]=_[x%U]}return this};var wt=/[^+/0-9A-Za-z-_]/g;function a(i){if(i=i.split("=")[0],i=i.trim().replace(wt,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function r(i,t){t=t||1/0;for(var e,s=i.length,l=null,T=[],x=0;x<s;++x){if(e=i.charCodeAt(x),e>55295&&e<57344){if(!l){if(e>56319){(t-=3)>-1&&T.push(239,191,189);continue}else if(x+1===s){(t-=3)>-1&&T.push(239,191,189);continue}l=e;continue}if(e<56320){(t-=3)>-1&&T.push(239,191,189),l=e;continue}e=(l-55296<<10|e-56320)+65536}else l&&(t-=3)>-1&&T.push(239,191,189);if(l=null,e<128){if((t-=1)<0)break;T.push(e)}else if(e<2048){if((t-=2)<0)break;T.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;T.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;T.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return T}function y(i){for(var t=[],e=0;e<i.length;++e)t.push(i.charCodeAt(e)&255);return t}function f(i,t){for(var e,s,l,T=[],x=0;x<i.length&&!((t-=2)<0);++x)e=i.charCodeAt(x),s=e>>8,l=e%256,T.push(l),T.push(s);return T}function C(i){return n.toByteArray(a(i))}function K(i,t,e,s){for(var l=0;l<s&&!(l+e>=t.length||l>=i.length);++l)t[l+e]=i[l];return l}function B(i,t){return i instanceof t||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===t.name}function G(i){return i!==i}var Q=function(){for(var i="0123456789abcdef",t=new Array(256),e=0;e<16;++e)for(var s=e*16,l=0;l<16;++l)t[s+l]=i[e]+i[l];return t}()}(It)),It}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ot;function re(){return Ot||(Ot=1,function(u,n){var o=ee(),m=o.Buffer;function g(d,c){for(var P in d)c[P]=d[P]}m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?u.exports=o:(g(o,n),n.Buffer=w);function w(d,c,P){return m(d,c,P)}w.prototype=Object.create(m.prototype),g(m,w),w.from=function(d,c,P){if(typeof d=="number")throw new TypeError("Argument must not be a number");return m(d,c,P)},w.alloc=function(d,c,P){if(typeof d!="number")throw new TypeError("Argument must be a number");var W=m(d);return c!==void 0?typeof P=="string"?W.fill(c,P):W.fill(c):W.fill(0),W},w.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return m(d)},w.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(d)}}(gt,gt.exports)),gt.exports}var Kt;function ne(){if(Kt)return Nt;Kt=1;var u=re().Buffer,n=u.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(p){if(!p)return"utf8";for(var F;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(F)return;p=(""+p).toLowerCase(),F=!0}}function m(p){var F=o(p);if(typeof F!="string"&&(u.isEncoding===n||!n(p)))throw new Error("Unknown encoding: "+p);return F||p}Nt.StringDecoder=g;function g(p){this.encoding=m(p);var F;switch(this.encoding){case"utf16le":this.text=Y,this.end=z,F=4;break;case"utf8":this.fillLast=P,F=4;break;case"base64":this.text=J,this.end=tt,F=3;break;default:this.write=et,this.end=Z;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=u.allocUnsafe(F)}g.prototype.write=function(p){if(p.length===0)return"";var F,v;if(this.lastNeed){if(F=this.fillLast(p),F===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<p.length?F?F+this.text(p,v):this.text(p,v):F||""},g.prototype.end=M,g.prototype.text=W,g.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function w(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function d(p,F,v){var D=F.length-1;if(D<v)return 0;var b=w(F[D]);return b>=0?(b>0&&(p.lastNeed=b-1),b):--D<v||b===-2?0:(b=w(F[D]),b>=0?(b>0&&(p.lastNeed=b-2),b):--D<v||b===-2?0:(b=w(F[D]),b>=0?(b>0&&(b===2?b=0:p.lastNeed=b-3),b):0))}function c(p,F,v){if((F[0]&192)!==128)return p.lastNeed=0,"�";if(p.lastNeed>1&&F.length>1){if((F[1]&192)!==128)return p.lastNeed=1,"�";if(p.lastNeed>2&&F.length>2&&(F[2]&192)!==128)return p.lastNeed=2,"�"}}function P(p){var F=this.lastTotal-this.lastNeed,v=c(this,p);if(v!==void 0)return v;if(this.lastNeed<=p.length)return p.copy(this.lastChar,F,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,F,0,p.length),this.lastNeed-=p.length}function W(p,F){var v=d(this,p,F);if(!this.lastNeed)return p.toString("utf8",F);this.lastTotal=v;var D=p.length-(v-this.lastNeed);return p.copy(this.lastChar,0,D),p.toString("utf8",F,D)}function M(p){var F=p&&p.length?this.write(p):"";return this.lastNeed?F+"�":F}function Y(p,F){if((p.length-F)%2===0){var v=p.toString("utf16le",F);if(v){var D=v.charCodeAt(v.length-1);if(D>=55296&&D<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",F,p.length-1)}function z(p){var F=p&&p.length?this.write(p):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return F+this.lastChar.toString("utf16le",0,v)}return F}function J(p,F){var v=(p.length-F)%3;return v===0?p.toString("base64",F):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",F,p.length-v))}function tt(p){var F=p&&p.length?this.write(p):"";return this.lastNeed?F+this.lastChar.toString("base64",0,3-this.lastNeed):F}function et(p){return p.toString(this.encoding)}function Z(p){return p&&p.length?this.write(p):""}return Nt}(function(u){(function(n){n.parser=function(a,r){return new m(a,r)},n.SAXParser=m,n.SAXStream=M,n.createStream=W,n.MAX_BUFFER_LENGTH=64*1024;var o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function m(a,r){if(!(this instanceof m))return new m(a,r);var y=this;w(y),y.q=y.c="",y.bufferCheckPosition=n.MAX_BUFFER_LENGTH,y.opt=r||{},y.opt.lowercase=y.opt.lowercase||y.opt.lowercasetags,y.looseCase=y.opt.lowercase?"toLowerCase":"toUpperCase",y.tags=[],y.closed=y.closedRoot=y.sawRoot=!1,y.tag=y.error=null,y.strict=!!a,y.noscript=!!(a||y.opt.noscript),y.state=h.BEGIN,y.strictEntities=y.opt.strictEntities,y.ENTITIES=y.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),y.attribList=[],y.opt.xmlns&&(y.ns=Object.create(et)),y.trackPosition=y.opt.position!==!1,y.trackPosition&&(y.position=y.line=y.column=0),rt(y,"onready")}Object.create||(Object.create=function(a){function r(){}r.prototype=a;var y=new r;return y}),Object.keys||(Object.keys=function(a){var r=[];for(var y in a)a.hasOwnProperty(y)&&r.push(y);return r});function g(a){for(var r=Math.max(n.MAX_BUFFER_LENGTH,10),y=0,f=0,C=o.length;f<C;f++){var K=a[o[f]].length;if(K>r)switch(o[f]){case"textNode":nt(a);break;case"cdata":L(a,"oncdata",a.cdata),a.cdata="";break;case"script":L(a,"onscript",a.script),a.script="";break;default:it(a,"Max buffer length exceeded: "+o[f])}y=Math.max(y,K)}var B=n.MAX_BUFFER_LENGTH-y;a.bufferCheckPosition=B+a.position}function w(a){for(var r=0,y=o.length;r<y;r++)a[o[r]]=""}function d(a){nt(a),a.cdata!==""&&(L(a,"oncdata",a.cdata),a.cdata=""),a.script!==""&&(L(a,"onscript",a.script),a.script="")}m.prototype={end:function(){mt(this)},write:wt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){d(this)}};var c;try{c=te().Stream}catch{c=function(){}}var P=n.EVENTS.filter(function(a){return a!=="error"&&a!=="end"});function W(a,r){return new M(a,r)}function M(a,r){if(!(this instanceof M))return new M(a,r);c.apply(this),this._parser=new m(a,r),this.writable=!0,this.readable=!0;var y=this;this._parser.onend=function(){y.emit("end")},this._parser.onerror=function(f){y.emit("error",f),y._parser.error=null},this._decoder=null,P.forEach(function(f){Object.defineProperty(y,"on"+f,{get:function(){return y._parser["on"+f]},set:function(C){if(!C)return y.removeAllListeners(f),y._parser["on"+f]=C,C;y.on(f,C)},enumerable:!0,configurable:!1})})}M.prototype=Object.create(c.prototype,{constructor:{value:M}}),M.prototype.write=function(a){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(a)){if(!this._decoder){var r=ne().StringDecoder;this._decoder=new r("utf8")}a=this._decoder.write(a)}return this._parser.write(a.toString()),this.emit("data",a),!0},M.prototype.end=function(a){return a&&a.length&&this.write(a),this._parser.end(),!0},M.prototype.on=function(a,r){var y=this;return!y._parser["on"+a]&&P.indexOf(a)!==-1&&(y._parser["on"+a]=function(){var f=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);f.splice(0,0,a),y.emit.apply(y,f)}),c.prototype.on.call(y,a,r)};var Y="[CDATA[",z="DOCTYPE",J="http://www.w3.org/XML/1998/namespace",tt="http://www.w3.org/2000/xmlns/",et={xml:J,xmlns:tt},Z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function D(a){return a===" "||a===`
`||a==="\r"||a==="	"}function b(a){return a==='"'||a==="'"}function ht(a){return a===">"||D(a)}function H(a,r){return a.test(r)}function xt(a,r){return!H(a,r)}var h=0;n.STATE={BEGIN:h++,BEGIN_WHITESPACE:h++,TEXT:h++,TEXT_ENTITY:h++,OPEN_WAKA:h++,SGML_DECL:h++,SGML_DECL_QUOTED:h++,DOCTYPE:h++,DOCTYPE_QUOTED:h++,DOCTYPE_DTD:h++,DOCTYPE_DTD_QUOTED:h++,COMMENT_STARTING:h++,COMMENT:h++,COMMENT_ENDING:h++,COMMENT_ENDED:h++,CDATA:h++,CDATA_ENDING:h++,CDATA_ENDING_2:h++,PROC_INST:h++,PROC_INST_BODY:h++,PROC_INST_ENDING:h++,OPEN_TAG:h++,OPEN_TAG_SLASH:h++,ATTRIB:h++,ATTRIB_NAME:h++,ATTRIB_NAME_SAW_WHITE:h++,ATTRIB_VALUE:h++,ATTRIB_VALUE_QUOTED:h++,ATTRIB_VALUE_CLOSED:h++,ATTRIB_VALUE_UNQUOTED:h++,ATTRIB_VALUE_ENTITY_Q:h++,ATTRIB_VALUE_ENTITY_U:h++,CLOSE_TAG:h++,CLOSE_TAG_SAW_WHITE:h++,SCRIPT:h++,SCRIPT_ENDING:h++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(a){var r=n.ENTITIES[a],y=typeof r=="number"?String.fromCharCode(r):r;n.ENTITIES[a]=y});for(var Et in n.STATE)n.STATE[n.STATE[Et]]=Et;h=n.STATE;function rt(a,r,y){a[r]&&a[r](y)}function L(a,r,y){a.textNode&&nt(a),rt(a,r,y)}function nt(a){a.textNode=ut(a.opt,a.textNode),a.textNode&&rt(a,"ontext",a.textNode),a.textNode=""}function ut(a,r){return a.trim&&(r=r.trim()),a.normalize&&(r=r.replace(/\s+/g," ")),r}function it(a,r){return nt(a),a.trackPosition&&(r+=`
Line: `+a.line+`
Column: `+a.column+`
Char: `+a.c),r=new Error(r),a.error=r,rt(a,"onerror",r),a}function mt(a){return a.sawRoot&&!a.closedRoot&&S(a,"Unclosed root tag"),a.state!==h.BEGIN&&a.state!==h.BEGIN_WHITESPACE&&a.state!==h.TEXT&&it(a,"Unexpected end"),nt(a),a.c="",a.closed=!0,rt(a,"onend"),m.call(a,a.strict,a.opt),a}function S(a,r){if(typeof a!="object"||!(a instanceof m))throw new Error("bad call to strictFail");a.strict&&it(a,r)}function dt(a){a.strict||(a.tagName=a.tagName[a.looseCase]());var r=a.tags[a.tags.length-1]||a,y=a.tag={name:a.tagName,attributes:{}};a.opt.xmlns&&(y.ns=r.ns),a.attribList.length=0,L(a,"onopentagstart",y)}function st(a,r){var y=a.indexOf(":"),f=y<0?["",a]:a.split(":"),C=f[0],K=f[1];return r&&a==="xmlns"&&(C="xmlns",K=""),{prefix:C,local:K}}function ot(a){if(a.strict||(a.attribName=a.attribName[a.looseCase]()),a.attribList.indexOf(a.attribName)!==-1||a.tag.attributes.hasOwnProperty(a.attribName)){a.attribName=a.attribValue="";return}if(a.opt.xmlns){var r=st(a.attribName,!0),y=r.prefix,f=r.local;if(y==="xmlns")if(f==="xml"&&a.attribValue!==J)S(a,"xml: prefix must be bound to "+J+`
Actual: `+a.attribValue);else if(f==="xmlns"&&a.attribValue!==tt)S(a,"xmlns: prefix must be bound to "+tt+`
Actual: `+a.attribValue);else{var C=a.tag,K=a.tags[a.tags.length-1]||a;C.ns===K.ns&&(C.ns=Object.create(K.ns)),C.ns[f]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,L(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function O(a,r){if(a.opt.xmlns){var y=a.tag,f=st(a.tagName);y.prefix=f.prefix,y.local=f.local,y.uri=y.ns[f.prefix]||"",y.prefix&&!y.uri&&(S(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),y.uri=f.prefix);var C=a.tags[a.tags.length-1]||a;y.ns&&C.ns!==y.ns&&Object.keys(y.ns).forEach(function(x){L(a,"onopennamespace",{prefix:x,uri:y.ns[x]})});for(var K=0,B=a.attribList.length;K<B;K++){var G=a.attribList[K],Q=G[0],i=G[1],t=st(Q,!0),e=t.prefix,s=t.local,l=e===""?"":y.ns[e]||"",T={name:Q,value:i,prefix:e,local:s,uri:l};e&&e!=="xmlns"&&!l&&(S(a,"Unbound namespace prefix: "+JSON.stringify(e)),T.uri=e),a.tag.attributes[Q]=T,L(a,"onattribute",T)}a.attribList.length=0}a.tag.isSelfClosing=!!r,a.sawRoot=!0,a.tags.push(a.tag),L(a,"onopentag",a.tag),r||(!a.noscript&&a.tagName.toLowerCase()==="script"?a.state=h.SCRIPT:a.state=h.TEXT,a.tag=null,a.tagName=""),a.attribName=a.attribValue="",a.attribList.length=0}function V(a){if(!a.tagName){S(a,"Weird empty close tag."),a.textNode+="</>",a.state=h.TEXT;return}if(a.script){if(a.tagName!=="script"){a.script+="</"+a.tagName+">",a.tagName="",a.state=h.SCRIPT;return}L(a,"onscript",a.script),a.script=""}var r=a.tags.length,y=a.tagName;a.strict||(y=y[a.looseCase]());for(var f=y;r--;){var C=a.tags[r];if(C.name!==f)S(a,"Unexpected close tag");else break}if(r<0){S(a,"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">",a.state=h.TEXT;return}a.tagName=y;for(var K=a.tags.length;K-- >r;){var B=a.tag=a.tags.pop();a.tagName=a.tag.name,L(a,"onclosetag",a.tagName);var G={};for(var Q in B.ns)G[Q]=B.ns[Q];var i=a.tags[a.tags.length-1]||a;a.opt.xmlns&&B.ns!==i.ns&&Object.keys(B.ns).forEach(function(t){var e=B.ns[t];L(a,"onclosenamespace",{prefix:t,uri:e})})}r===0&&(a.closedRoot=!0),a.tagName=a.attribValue=a.attribName="",a.attribList.length=0,a.state=h.TEXT}function yt(a){var r=a.entity,y=r.toLowerCase(),f,C="";return a.ENTITIES[r]?a.ENTITIES[r]:a.ENTITIES[y]?a.ENTITIES[y]:(r=y,r.charAt(0)==="#"&&(r.charAt(1)==="x"?(r=r.slice(2),f=parseInt(r,16),C=f.toString(16)):(r=r.slice(1),f=parseInt(r,10),C=f.toString(10))),r=r.replace(/^0+/,""),isNaN(f)||C.toLowerCase()!==r?(S(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(f))}function ct(a,r){r==="<"?(a.state=h.OPEN_WAKA,a.startTagPosition=a.position):D(r)||(S(a,"Non-whitespace before first tag."),a.textNode=r,a.state=h.TEXT)}function ft(a,r){var y="";return r<a.length&&(y=a.charAt(r)),y}function wt(a){var r=this;if(this.error)throw this.error;if(r.closed)return it(r,"Cannot write after close. Assign an onready handler.");if(a===null)return mt(r);typeof a=="object"&&(a=a.toString());for(var y=0,f="";f=ft(a,y++),r.c=f,!!f;)switch(r.trackPosition&&(r.position++,f===`
`?(r.line++,r.column=0):r.column++),r.state){case h.BEGIN:if(r.state=h.BEGIN_WHITESPACE,f==="\uFEFF")continue;ct(r,f);continue;case h.BEGIN_WHITESPACE:ct(r,f);continue;case h.TEXT:if(r.sawRoot&&!r.closedRoot){for(var C=y-1;f&&f!=="<"&&f!=="&";)f=ft(a,y++),f&&r.trackPosition&&(r.position++,f===`
`?(r.line++,r.column=0):r.column++);r.textNode+=a.substring(C,y-1)}f==="<"&&!(r.sawRoot&&r.closedRoot&&!r.strict)?(r.state=h.OPEN_WAKA,r.startTagPosition=r.position):(!D(f)&&(!r.sawRoot||r.closedRoot)&&S(r,"Text data outside of root node."),f==="&"?r.state=h.TEXT_ENTITY:r.textNode+=f);continue;case h.SCRIPT:f==="<"?r.state=h.SCRIPT_ENDING:r.script+=f;continue;case h.SCRIPT_ENDING:f==="/"?r.state=h.CLOSE_TAG:(r.script+="<"+f,r.state=h.SCRIPT);continue;case h.OPEN_WAKA:if(f==="!")r.state=h.SGML_DECL,r.sgmlDecl="";else if(!D(f))if(H(Z,f))r.state=h.OPEN_TAG,r.tagName=f;else if(f==="/")r.state=h.CLOSE_TAG,r.tagName="";else if(f==="?")r.state=h.PROC_INST,r.procInstName=r.procInstBody="";else{if(S(r,"Unencoded <"),r.startTagPosition+1<r.position){var K=r.position-r.startTagPosition;f=new Array(K).join(" ")+f}r.textNode+="<"+f,r.state=h.TEXT}continue;case h.SGML_DECL:(r.sgmlDecl+f).toUpperCase()===Y?(L(r,"onopencdata"),r.state=h.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+f==="--"?(r.state=h.COMMENT,r.comment="",r.sgmlDecl=""):(r.sgmlDecl+f).toUpperCase()===z?(r.state=h.DOCTYPE,(r.doctype||r.sawRoot)&&S(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):f===">"?(L(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=h.TEXT):(b(f)&&(r.state=h.SGML_DECL_QUOTED),r.sgmlDecl+=f);continue;case h.SGML_DECL_QUOTED:f===r.q&&(r.state=h.SGML_DECL,r.q=""),r.sgmlDecl+=f;continue;case h.DOCTYPE:f===">"?(r.state=h.TEXT,L(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=f,f==="["?r.state=h.DOCTYPE_DTD:b(f)&&(r.state=h.DOCTYPE_QUOTED,r.q=f));continue;case h.DOCTYPE_QUOTED:r.doctype+=f,f===r.q&&(r.q="",r.state=h.DOCTYPE);continue;case h.DOCTYPE_DTD:r.doctype+=f,f==="]"?r.state=h.DOCTYPE:b(f)&&(r.state=h.DOCTYPE_DTD_QUOTED,r.q=f);continue;case h.DOCTYPE_DTD_QUOTED:r.doctype+=f,f===r.q&&(r.state=h.DOCTYPE_DTD,r.q="");continue;case h.COMMENT:f==="-"?r.state=h.COMMENT_ENDING:r.comment+=f;continue;case h.COMMENT_ENDING:f==="-"?(r.state=h.COMMENT_ENDED,r.comment=ut(r.opt,r.comment),r.comment&&L(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+f,r.state=h.COMMENT);continue;case h.COMMENT_ENDED:f!==">"?(S(r,"Malformed comment"),r.comment+="--"+f,r.state=h.COMMENT):r.state=h.TEXT;continue;case h.CDATA:f==="]"?r.state=h.CDATA_ENDING:r.cdata+=f;continue;case h.CDATA_ENDING:f==="]"?r.state=h.CDATA_ENDING_2:(r.cdata+="]"+f,r.state=h.CDATA);continue;case h.CDATA_ENDING_2:f===">"?(r.cdata&&L(r,"oncdata",r.cdata),L(r,"onclosecdata"),r.cdata="",r.state=h.TEXT):f==="]"?r.cdata+="]":(r.cdata+="]]"+f,r.state=h.CDATA);continue;case h.PROC_INST:f==="?"?r.state=h.PROC_INST_ENDING:D(f)?r.state=h.PROC_INST_BODY:r.procInstName+=f;continue;case h.PROC_INST_BODY:if(!r.procInstBody&&D(f))continue;f==="?"?r.state=h.PROC_INST_ENDING:r.procInstBody+=f;continue;case h.PROC_INST_ENDING:f===">"?(L(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=h.TEXT):(r.procInstBody+="?"+f,r.state=h.PROC_INST_BODY);continue;case h.OPEN_TAG:H(p,f)?r.tagName+=f:(dt(r),f===">"?O(r):f==="/"?r.state=h.OPEN_TAG_SLASH:(D(f)||S(r,"Invalid character in tag name"),r.state=h.ATTRIB));continue;case h.OPEN_TAG_SLASH:f===">"?(O(r,!0),V(r)):(S(r,"Forward-slash in opening tag not followed by >"),r.state=h.ATTRIB);continue;case h.ATTRIB:if(D(f))continue;f===">"?O(r):f==="/"?r.state=h.OPEN_TAG_SLASH:H(Z,f)?(r.attribName=f,r.attribValue="",r.state=h.ATTRIB_NAME):S(r,"Invalid attribute name");continue;case h.ATTRIB_NAME:f==="="?r.state=h.ATTRIB_VALUE:f===">"?(S(r,"Attribute without value"),r.attribValue=r.attribName,ot(r),O(r)):D(f)?r.state=h.ATTRIB_NAME_SAW_WHITE:H(p,f)?r.attribName+=f:S(r,"Invalid attribute name");continue;case h.ATTRIB_NAME_SAW_WHITE:if(f==="=")r.state=h.ATTRIB_VALUE;else{if(D(f))continue;S(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",L(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",f===">"?O(r):H(Z,f)?(r.attribName=f,r.state=h.ATTRIB_NAME):(S(r,"Invalid attribute name"),r.state=h.ATTRIB)}continue;case h.ATTRIB_VALUE:if(D(f))continue;b(f)?(r.q=f,r.state=h.ATTRIB_VALUE_QUOTED):(S(r,"Unquoted attribute value"),r.state=h.ATTRIB_VALUE_UNQUOTED,r.attribValue=f);continue;case h.ATTRIB_VALUE_QUOTED:if(f!==r.q){f==="&"?r.state=h.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=f;continue}ot(r),r.q="",r.state=h.ATTRIB_VALUE_CLOSED;continue;case h.ATTRIB_VALUE_CLOSED:D(f)?r.state=h.ATTRIB:f===">"?O(r):f==="/"?r.state=h.OPEN_TAG_SLASH:H(Z,f)?(S(r,"No whitespace between attributes"),r.attribName=f,r.attribValue="",r.state=h.ATTRIB_NAME):S(r,"Invalid attribute name");continue;case h.ATTRIB_VALUE_UNQUOTED:if(!ht(f)){f==="&"?r.state=h.ATTRIB_VALUE_ENTITY_U:r.attribValue+=f;continue}ot(r),f===">"?O(r):r.state=h.ATTRIB;continue;case h.CLOSE_TAG:if(r.tagName)f===">"?V(r):H(p,f)?r.tagName+=f:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=h.SCRIPT):(D(f)||S(r,"Invalid tagname in closing tag"),r.state=h.CLOSE_TAG_SAW_WHITE);else{if(D(f))continue;xt(Z,f)?r.script?(r.script+="</"+f,r.state=h.SCRIPT):S(r,"Invalid tagname in closing tag."):r.tagName=f}continue;case h.CLOSE_TAG_SAW_WHITE:if(D(f))continue;f===">"?V(r):S(r,"Invalid characters in closing tag");continue;case h.TEXT_ENTITY:case h.ATTRIB_VALUE_ENTITY_Q:case h.ATTRIB_VALUE_ENTITY_U:var B,G;switch(r.state){case h.TEXT_ENTITY:B=h.TEXT,G="textNode";break;case h.ATTRIB_VALUE_ENTITY_Q:B=h.ATTRIB_VALUE_QUOTED,G="attribValue";break;case h.ATTRIB_VALUE_ENTITY_U:B=h.ATTRIB_VALUE_UNQUOTED,G="attribValue";break}f===";"?(r[G]+=yt(r),r.entity="",r.state=B):H(r.entity.length?v:F,f)?r.entity+=f:(S(r,"Invalid character in entity name"),r[G]+="&"+r.entity+f,r.entity="",r.state=B);continue;default:throw new Error(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&g(r),r}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var a=String.fromCharCode,r=Math.floor,y=function(){var f=16384,C=[],K,B,G=-1,Q=arguments.length;if(!Q)return"";for(var i="";++G<Q;){var t=Number(arguments[G]);if(!isFinite(t)||t<0||t>1114111||r(t)!==t)throw RangeError("Invalid code point: "+t);t<=65535?C.push(t):(t-=65536,K=(t>>10)+55296,B=t%1024+56320,C.push(K,B)),(G+1===Q||C.length>f)&&(i+=a.apply(null,C),C.length=0)}return i};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:y,configurable:!0,writable:!0}):String.fromCodePoint=y}()})(u)})(Lt);var vt={isArray:function(u){return Array.isArray?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"}},ie=vt.isArray,_t={copyOptions:function(u){var n,o={};for(n in u)u.hasOwnProperty(n)&&(o[n]=u[n]);return o},ensureFlagExists:function(u,n){(!(u in n)||typeof n[u]!="boolean")&&(n[u]=!1)},ensureSpacesExists:function(u){(!("spaces"in u)||typeof u.spaces!="number"&&typeof u.spaces!="string")&&(u.spaces=0)},ensureAlwaysArrayExists:function(u){(!("alwaysArray"in u)||typeof u.alwaysArray!="boolean"&&!ie(u.alwaysArray))&&(u.alwaysArray=!1)},ensureKeyExists:function(u,n){(!(u+"Key"in n)||typeof n[u+"Key"]!="string")&&(n[u+"Key"]=n.compact?"_"+u:u)},checkFnExists:function(u,n){return u+"Fn"in n}},ae=Lt,N=_t,at=vt.isArray,E,A;function ue(u){return E=N.copyOptions(u),N.ensureFlagExists("ignoreDeclaration",E),N.ensureFlagExists("ignoreInstruction",E),N.ensureFlagExists("ignoreAttributes",E),N.ensureFlagExists("ignoreText",E),N.ensureFlagExists("ignoreComment",E),N.ensureFlagExists("ignoreCdata",E),N.ensureFlagExists("ignoreDoctype",E),N.ensureFlagExists("compact",E),N.ensureFlagExists("alwaysChildren",E),N.ensureFlagExists("addParent",E),N.ensureFlagExists("trim",E),N.ensureFlagExists("nativeType",E),N.ensureFlagExists("nativeTypeAttributes",E),N.ensureFlagExists("sanitize",E),N.ensureFlagExists("instructionHasAttributes",E),N.ensureFlagExists("captureSpacesBetweenElements",E),N.ensureAlwaysArrayExists(E),N.ensureKeyExists("declaration",E),N.ensureKeyExists("instruction",E),N.ensureKeyExists("attributes",E),N.ensureKeyExists("text",E),N.ensureKeyExists("comment",E),N.ensureKeyExists("cdata",E),N.ensureKeyExists("doctype",E),N.ensureKeyExists("type",E),N.ensureKeyExists("name",E),N.ensureKeyExists("elements",E),N.ensureKeyExists("parent",E),N.checkFnExists("doctype",E),N.checkFnExists("instruction",E),N.checkFnExists("cdata",E),N.checkFnExists("comment",E),N.checkFnExists("text",E),N.checkFnExists("instructionName",E),N.checkFnExists("elementName",E),N.checkFnExists("attributeName",E),N.checkFnExists("attributeValue",E),N.checkFnExists("attributes",E),E}function kt(u){var n=Number(u);if(!isNaN(n))return n;var o=u.toLowerCase();return o==="true"?!0:o==="false"?!1:u}function lt(u,n){var o;if(E.compact){if(!A[E[u+"Key"]]&&(at(E.alwaysArray)?E.alwaysArray.indexOf(E[u+"Key"])!==-1:E.alwaysArray)&&(A[E[u+"Key"]]=[]),A[E[u+"Key"]]&&!at(A[E[u+"Key"]])&&(A[E[u+"Key"]]=[A[E[u+"Key"]]]),u+"Fn"in E&&typeof n=="string"&&(n=E[u+"Fn"](n,A)),u==="instruction"&&("instructionFn"in E||"instructionNameFn"in E)){for(o in n)if(n.hasOwnProperty(o))if("instructionFn"in E)n[o]=E.instructionFn(n[o],o,A);else{var m=n[o];delete n[o],n[E.instructionNameFn(o,m,A)]=m}}at(A[E[u+"Key"]])?A[E[u+"Key"]].push(n):A[E[u+"Key"]]=n}else{A[E.elementsKey]||(A[E.elementsKey]=[]);var g={};if(g[E.typeKey]=u,u==="instruction"){for(o in n)if(n.hasOwnProperty(o))break;g[E.nameKey]="instructionNameFn"in E?E.instructionNameFn(o,n,A):o,E.instructionHasAttributes?(g[E.attributesKey]=n[o][E.attributesKey],"instructionFn"in E&&(g[E.attributesKey]=E.instructionFn(g[E.attributesKey],o,A))):("instructionFn"in E&&(n[o]=E.instructionFn(n[o],o,A)),g[E.instructionKey]=n[o])}else u+"Fn"in E&&(n=E[u+"Fn"](n,A)),g[E[u+"Key"]]=n;E.addParent&&(g[E.parentKey]=A),A[E.elementsKey].push(g)}}function Pt(u){if("attributesFn"in E&&u&&(u=E.attributesFn(u,A)),(E.trim||"attributeValueFn"in E||"attributeNameFn"in E||E.nativeTypeAttributes)&&u){var n;for(n in u)if(u.hasOwnProperty(n)&&(E.trim&&(u[n]=u[n].trim()),E.nativeTypeAttributes&&(u[n]=kt(u[n])),"attributeValueFn"in E&&(u[n]=E.attributeValueFn(u[n],n,A)),"attributeNameFn"in E)){var o=u[n];delete u[n],u[E.attributeNameFn(n,u[n],A)]=o}}return u}function se(u){var n={};if(u.body&&(u.name.toLowerCase()==="xml"||E.instructionHasAttributes)){for(var o=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,m;(m=o.exec(u.body))!==null;)n[m[1]]=m[2]||m[3]||m[4];n=Pt(n)}if(u.name.toLowerCase()==="xml"){if(E.ignoreDeclaration)return;A[E.declarationKey]={},Object.keys(n).length&&(A[E.declarationKey][E.attributesKey]=n),E.addParent&&(A[E.declarationKey][E.parentKey]=A)}else{if(E.ignoreInstruction)return;E.trim&&(u.body=u.body.trim());var g={};E.instructionHasAttributes&&Object.keys(n).length?(g[u.name]={},g[u.name][E.attributesKey]=n):g[u.name]=u.body,lt("instruction",g)}}function oe(u,n){var o;if(typeof u=="object"&&(n=u.attributes,u=u.name),n=Pt(n),"elementNameFn"in E&&(u=E.elementNameFn(u,A)),E.compact){if(o={},!E.ignoreAttributes&&n&&Object.keys(n).length){o[E.attributesKey]={};var m;for(m in n)n.hasOwnProperty(m)&&(o[E.attributesKey][m]=n[m])}!(u in A)&&(at(E.alwaysArray)?E.alwaysArray.indexOf(u)!==-1:E.alwaysArray)&&(A[u]=[]),A[u]&&!at(A[u])&&(A[u]=[A[u]]),at(A[u])?A[u].push(o):A[u]=o}else A[E.elementsKey]||(A[E.elementsKey]=[]),o={},o[E.typeKey]="element",o[E.nameKey]=u,!E.ignoreAttributes&&n&&Object.keys(n).length&&(o[E.attributesKey]=n),E.alwaysChildren&&(o[E.elementsKey]=[]),A[E.elementsKey].push(o);o[E.parentKey]=A,A=o}function ce(u){E.ignoreText||!u.trim()&&!E.captureSpacesBetweenElements||(E.trim&&(u=u.trim()),E.nativeType&&(u=kt(u)),E.sanitize&&(u=u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),lt("text",u))}function fe(u){E.ignoreComment||(E.trim&&(u=u.trim()),lt("comment",u))}function le(u){var n=A[E.parentKey];E.addParent||delete A[E.parentKey],A=n}function he(u){E.ignoreCdata||(E.trim&&(u=u.trim()),lt("cdata",u))}function Ee(u){E.ignoreDoctype||(u=u.replace(/^ /,""),E.trim&&(u=u.trim()),lt("doctype",u))}function me(u){u.note=u}var Mt=function(u,n){var o=ae.parser(!0,{}),m={};if(A=m,E=ue(n),o.opt={strictEntities:!0},o.onopentag=oe,o.ontext=ce,o.oncomment=fe,o.onclosetag=le,o.onerror=me,o.oncdata=he,o.ondoctype=Ee,o.onprocessinginstruction=se,o.write(u).close(),m[E.elementsKey]){var g=m[E.elementsKey];delete m[E.elementsKey],m[E.elementsKey]=g,delete m.text}return m},Rt=_t,ye=Mt;function pe(u){var n=Rt.copyOptions(u);return Rt.ensureSpacesExists(n),n}var ge=function(u,n){var o,m,g,w;return o=pe(n),m=ye(u,o),w="compact"in o&&o.compact?"_parent":"parent","addParent"in o&&o.addParent?g=JSON.stringify(m,function(d,c){return d===w?"_":c},o.spaces):g=JSON.stringify(m,null,o.spaces),g.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},I=_t,Te=vt.isArray,X,q;function xe(u){var n=I.copyOptions(u);return I.ensureFlagExists("ignoreDeclaration",n),I.ensureFlagExists("ignoreInstruction",n),I.ensureFlagExists("ignoreAttributes",n),I.ensureFlagExists("ignoreText",n),I.ensureFlagExists("ignoreComment",n),I.ensureFlagExists("ignoreCdata",n),I.ensureFlagExists("ignoreDoctype",n),I.ensureFlagExists("compact",n),I.ensureFlagExists("indentText",n),I.ensureFlagExists("indentCdata",n),I.ensureFlagExists("indentAttributes",n),I.ensureFlagExists("indentInstruction",n),I.ensureFlagExists("fullTagEmptyElement",n),I.ensureFlagExists("noQuotesForNativeAttributes",n),I.ensureSpacesExists(n),typeof n.spaces=="number"&&(n.spaces=Array(n.spaces+1).join(" ")),I.ensureKeyExists("declaration",n),I.ensureKeyExists("instruction",n),I.ensureKeyExists("attributes",n),I.ensureKeyExists("text",n),I.ensureKeyExists("comment",n),I.ensureKeyExists("cdata",n),I.ensureKeyExists("doctype",n),I.ensureKeyExists("type",n),I.ensureKeyExists("name",n),I.ensureKeyExists("elements",n),I.checkFnExists("doctype",n),I.checkFnExists("instruction",n),I.checkFnExists("cdata",n),I.checkFnExists("comment",n),I.checkFnExists("text",n),I.checkFnExists("instructionName",n),I.checkFnExists("elementName",n),I.checkFnExists("attributeName",n),I.checkFnExists("attributeValue",n),I.checkFnExists("attributes",n),I.checkFnExists("fullTagEmptyElement",n),n}function $(u,n,o){return(!o&&u.spaces?`
`:"")+Array(n+1).join(u.spaces)}function Tt(u,n,o){if(n.ignoreAttributes)return"";"attributesFn"in n&&(u=n.attributesFn(u,q,X));var m,g,w,d,c=[];for(m in u)u.hasOwnProperty(m)&&u[m]!==null&&u[m]!==void 0&&(d=n.noQuotesForNativeAttributes&&typeof u[m]!="string"?"":'"',g=""+u[m],g=g.replace(/"/g,"&quot;"),w="attributeNameFn"in n?n.attributeNameFn(m,g,q,X):m,c.push(n.spaces&&n.indentAttributes?$(n,o+1,!1):" "),c.push(w+"="+d+("attributeValueFn"in n?n.attributeValueFn(g,m,q,X):g)+d));return u&&Object.keys(u).length&&n.spaces&&n.indentAttributes&&c.push($(n,o,!1)),c.join("")}function Vt(u,n,o){return X=u,q="xml",n.ignoreDeclaration?"":"<?xml"+Tt(u[n.attributesKey],n,o)+"?>"}function Gt(u,n,o){if(n.ignoreInstruction)return"";var m;for(m in u)if(u.hasOwnProperty(m))break;var g="instructionNameFn"in n?n.instructionNameFn(m,u[m],q,X):m;if(typeof u[m]=="object")return X=u,q=g,"<?"+g+Tt(u[m][n.attributesKey],n,o)+"?>";var w=u[m]?u[m]:"";return"instructionFn"in n&&(w=n.instructionFn(w,m,q,X)),"<?"+g+(w?" "+w:"")+"?>"}function Yt(u,n){return n.ignoreComment?"":"<!--"+("commentFn"in n?n.commentFn(u,q,X):u)+"-->"}function jt(u,n){return n.ignoreCdata?"":"<![CDATA["+("cdataFn"in n?n.cdataFn(u,q,X):u.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Xt(u,n){return n.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in n?n.doctypeFn(u,q,X):u)+">"}function Ct(u,n){return n.ignoreText?"":(u=""+u,u=u.replace(/&amp;/g,"&"),u=u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in n?n.textFn(u,q,X):u)}function de(u,n){var o;if(u.elements&&u.elements.length)for(o=0;o<u.elements.length;++o)switch(u.elements[o][n.typeKey]){case"text":if(n.indentText)return!0;break;case"cdata":if(n.indentCdata)return!0;break;case"instruction":if(n.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function we(u,n,o){X=u,q=u.name;var m=[],g="elementNameFn"in n?n.elementNameFn(u.name,u):u.name;m.push("<"+g),u[n.attributesKey]&&m.push(Tt(u[n.attributesKey],n,o));var w=u[n.elementsKey]&&u[n.elementsKey].length||u[n.attributesKey]&&u[n.attributesKey]["xml:space"]==="preserve";return w||("fullTagEmptyElementFn"in n?w=n.fullTagEmptyElementFn(u.name,u):w=n.fullTagEmptyElement),w?(m.push(">"),u[n.elementsKey]&&u[n.elementsKey].length&&(m.push(qt(u[n.elementsKey],n,o+1)),X=u,q=u.name),m.push(n.spaces&&de(u,n)?`
`+Array(o+1).join(n.spaces):""),m.push("</"+g+">")):m.push("/>"),m.join("")}function qt(u,n,o,m){return u.reduce(function(g,w){var d=$(n,o,m&&!g);switch(w.type){case"element":return g+d+we(w,n,o);case"comment":return g+d+Yt(w[n.commentKey],n);case"doctype":return g+d+Xt(w[n.doctypeKey],n);case"cdata":return g+(n.indentCdata?d:"")+jt(w[n.cdataKey],n);case"text":return g+(n.indentText?d:"")+Ct(w[n.textKey],n);case"instruction":var c={};return c[w[n.nameKey]]=w[n.attributesKey]?w:w[n.instructionKey],g+(n.indentInstruction?d:"")+Gt(c,n,o)}},"")}function Wt(u,n,o){var m;for(m in u)if(u.hasOwnProperty(m))switch(m){case n.parentKey:case n.attributesKey:break;case n.textKey:if(n.indentText||o)return!0;break;case n.cdataKey:if(n.indentCdata||o)return!0;break;case n.instructionKey:if(n.indentInstruction||o)return!0;break;case n.doctypeKey:case n.commentKey:return!0;default:return!0}return!1}function Fe(u,n,o,m,g){X=u,q=n;var w="elementNameFn"in o?o.elementNameFn(n,u):n;if(typeof u>"u"||u===null||u==="")return"fullTagEmptyElementFn"in o&&o.fullTagEmptyElementFn(n,u)||o.fullTagEmptyElement?"<"+w+"></"+w+">":"<"+w+"/>";var d=[];if(n){if(d.push("<"+w),typeof u!="object")return d.push(">"+Ct(u,o)+"</"+w+">"),d.join("");u[o.attributesKey]&&d.push(Tt(u[o.attributesKey],o,m));var c=Wt(u,o,!0)||u[o.attributesKey]&&u[o.attributesKey]["xml:space"]==="preserve";if(c||("fullTagEmptyElementFn"in o?c=o.fullTagEmptyElementFn(n,u):c=o.fullTagEmptyElement),c)d.push(">");else return d.push("/>"),d.join("")}return d.push(Ht(u,o,m+1,!1)),X=u,q=n,n&&d.push((g?$(o,m,!1):"")+"</"+w+">"),d.join("")}function Ht(u,n,o,m){var g,w,d,c=[];for(w in u)if(u.hasOwnProperty(w))for(d=Te(u[w])?u[w]:[u[w]],g=0;g<d.length;++g){switch(w){case n.declarationKey:c.push(Vt(d[g],n,o));break;case n.instructionKey:c.push((n.indentInstruction?$(n,o,m):"")+Gt(d[g],n,o));break;case n.attributesKey:case n.parentKey:break;case n.textKey:c.push((n.indentText?$(n,o,m):"")+Ct(d[g],n));break;case n.cdataKey:c.push((n.indentCdata?$(n,o,m):"")+jt(d[g],n));break;case n.doctypeKey:c.push($(n,o,m)+Xt(d[g],n));break;case n.commentKey:c.push($(n,o,m)+Yt(d[g],n));break;default:c.push($(n,o,m)+Fe(d[g],w,n,o,Wt(d[g],n)))}m=m&&!c.length}return c.join("")}var Qt=function(u,n){n=xe(n);var o=[];return X=u,q="_root_",n.compact?o.push(Ht(u,n,0,!0)):(u[n.declarationKey]&&o.push(Vt(u[n.declarationKey],n,0)),u[n.elementsKey]&&u[n.elementsKey].length&&o.push(qt(u[n.elementsKey],n,0,!o.length))),o.join("")},Ae=Qt,Ne=function(u,n){u instanceof Buffer&&(u=u.toString());var o=null;if(typeof u=="string")try{o=JSON.parse(u)}catch{throw new Error("The JSON structure is invalid")}else o=u;return Ae(o,n)},Ie=Mt,ve=ge,_e=Qt,Ce=Ne,be={xml2js:Ie,xml2json:ve,js2xml:_e,json2xml:Ce};const Be=$t(be);export{Be as c};
