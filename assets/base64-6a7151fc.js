const C="3.7.7",j=C,f=typeof Buffer=="function",g=typeof TextDecoder=="function"?new TextDecoder:void 0,m=typeof TextEncoder=="function"?new TextEncoder:void 0,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=Array.prototype.slice.call(L),l=(t=>{let e={};return t.forEach((r,n)=>e[r]=n),e})(c),N=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,o=String.fromCharCode.bind(String),B=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),F=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),E=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),S=t=>{let e,r,n,s,a="";const h=t.length%3;for(let u=0;u<t.length;){if((r=t.charCodeAt(u++))>255||(n=t.charCodeAt(u++))>255||(s=t.charCodeAt(u++))>255)throw new TypeError("invalid character found");e=r<<16|n<<8|s,a+=c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[e&63]}return h?a.slice(0,h-3)+"===".substring(h):a},p=typeof btoa=="function"?t=>btoa(t):f?t=>Buffer.from(t,"binary").toString("base64"):S,b=f?t=>Buffer.from(t).toString("base64"):t=>{let r=[];for(let n=0,s=t.length;n<s;n+=4096)r.push(o.apply(null,t.subarray(n,n+4096)));return p(r.join(""))},d=(t,e=!1)=>e?F(b(t)):b(t),M=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?o(192|e>>>6)+o(128|e&63):o(224|e>>>12&15)+o(128|e>>>6&63)+o(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return o(240|e>>>18&7)+o(128|e>>>12&63)+o(128|e>>>6&63)+o(128|e&63)}},$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,w=t=>t.replace($,M),U=f?t=>Buffer.from(t,"utf8").toString("base64"):m?t=>b(m.encode(t)):t=>p(w(t)),i=(t,e=!1)=>e?F(U(t)):U(t),_=t=>i(t,!0),k=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,q=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return o((r>>>10)+55296)+o((r&1023)+56320);case 3:return o((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return o((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},D=t=>t.replace(k,q),R=t=>{if(t=t.replace(/\s+/g,""),!N.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r="",n,s;for(let a=0;a<t.length;)e=l[t.charAt(a++)]<<18|l[t.charAt(a++)]<<12|(n=l[t.charAt(a++)])<<6|(s=l[t.charAt(a++)]),r+=n===64?o(e>>16&255):s===64?o(e>>16&255,e>>8&255):o(e>>16&255,e>>8&255,e&255);return r},y=typeof atob=="function"?t=>atob(E(t)):f?t=>Buffer.from(t,"base64").toString("binary"):R,T=f?t=>B(Buffer.from(t,"base64")):t=>B(y(t).split("").map(e=>e.charCodeAt(0))),I=t=>T(P(t)),G=f?t=>Buffer.from(t,"base64").toString("utf8"):g?t=>g.decode(T(t)):t=>D(y(t)),P=t=>E(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),A=t=>G(P(t)),H=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},v=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),z=function(){const t=(e,r)=>Object.defineProperty(String.prototype,e,v(r));t("fromBase64",function(){return A(this)}),t("toBase64",function(e){return i(this,e)}),t("toBase64URI",function(){return i(this,!0)}),t("toBase64URL",function(){return i(this,!0)}),t("toUint8Array",function(){return I(this)})},Z=function(){const t=(e,r)=>Object.defineProperty(Uint8Array.prototype,e,v(r));t("toBase64",function(e){return d(this,e)}),t("toBase64URI",function(){return d(this,!0)}),t("toBase64URL",function(){return d(this,!0)})},J=()=>{z(),Z()},x={version:C,VERSION:j,atob:y,atobPolyfill:R,btoa:p,btoaPolyfill:S,fromBase64:A,toBase64:i,encode:i,encodeURI:_,encodeURL:_,utob:w,btou:D,decode:A,isValid:H,fromUint8Array:d,toUint8Array:I,extendString:z,extendUint8Array:Z,extendBuiltins:J};function X(t,{makeUrlSafe:e=!1}={}){const r=x.encode(t);return e?Q(r):r}function Y(t,{makeUrlSafe:e=!1}={}){if(!K(t,{makeUrlSafe:e}))throw new Error("Incorrect base64 string");let r=V(t);e&&(r=O(r));try{return x.decode(r)}catch{throw new Error("Incorrect base64 string")}}function V(t){return t.replace(/^data:.*?;base64,/,"")}function K(t,{makeUrlSafe:e=!1}={}){let r=V(t);e&&(r=O(r));try{const n=x.fromUint8Array(x.toUint8Array(r));return e?W(n)===r:n===r.replace(/\s/g,"")}catch{return!1}}function Q(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function O(t){return t.replace(/-/g,"+").replace(/_/g,"/").replace(/[^A-Za-z0-9+/]/g,"")}function W(t){return t.replace(/=/g,"")}export{Y as b,K as i,X as t};
